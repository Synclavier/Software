insert ':-xpl:literals';insert ':-xpl:catrtns';dcl len  lit '768'; /* word length of one overlay routine */dcl rtns lit '3'; /* number of overlay routines to merge */dcl seclen lit 'shr(len, 8)'; /* sector length of one overlay routine */dcl (fstart, wstart, sstart, hstart) fixed; /* start of flpload., winload., scsiloa., and highload, respectively */dcl (ms_fstart, ms_wstart, ms_sstart, ms_hstart) fixed;dcl (flen, wlen, slen) fixed; /* word lengths of flpload., winload., and scsiloa., respectively */dcl buf (rtns*len - 1) fixed; /* disk buffer */dcl cat (c#dir_max - 1) fixed;call set_catbuf (addr(cat (0)), 0); /* set catalog buffer */call blockset (buf, rtns*len, 0); /* set disk buffer to zero */print 'This program merges new SCSILOA. with orig .ld-7 into HIGHLOAD';if not locate ('.ld-7.', 1) then do;   print;   print 'File ''.ld-7'' is not in current catalog.';   call exit(-1);end;ms_fstart = f#ms_sector; fstart = f#ls_sector; flen = f#words; /* save where it starts */if not locate ('SCSILOA.', 1) then do;   print;   print 'File ''SCSILOA.'' is not in current catalog.';   call exit(-1);end;if ((f#ms_length <> 0) or (f#ls_length IGT seclen)) then do; /* must be one or two sectors long */   print;   print 'File ''SCSILOA.'' is too long (must be less than four sectors).';   call exit(-1);end;ms_sstart = f#ms_sector; sstart = f#ls_sector; slen = f#words; /* save where it starts */if not replace ('HIGHLOAD', t#exec, 0, rtns*seclen, (rtns - 1)*len + f#words, 1) then do; /* save a block for result */   print;   print 'Couldn''t create file ''HIGHLOAD''.';   call exit(-1);end;ms_hstart = f#ms_sector; hstart = f#ls_sector; /* save where it starts */call readdata  (ms_fstart, fstart, buf, flen); /* read in .ld-7 */call readdata  (ms_sstart, sstart, location(addr(buf ((rtns - 1)*len))), slen); /* read in SCSILOA. above it */call writedata (ms_hstart, hstart, buf, rtns*len); /* and write out the result */print 'HIGHLOAD now contains the new binary image for .LD-x';