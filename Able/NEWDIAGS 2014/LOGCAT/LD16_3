/*Title           : D16 timer/D03 clock test module  - inserted in LOGGERProject Engineer: William LeathersProject Start   : Feb 1986New England Digital CorporationModified:02/16/88  - Set M64K to .1 default*//***************************************************************************//************     Required for stand - alone compilation    ****************//*insert ':-xpl:asciidef';insert ':-xpl:termutil';insert ':-xpl:intrprtr';insert ':NEWDIAGS:sysinit';dcl status_line1 lit '18,10';  dcl status_line2 lit '19,10'; dcl status_line3 lit '20,10';  dcl status_line4 lit '21,10'; dcl milliseconds fixed;when d03int then begin;   milliseconds = milliseconds + 5;end;dcl erase_status_lines lit 'call clr_status';clr_status: proc;  pos(status_line4); erase_line;  pos(status_line3); erase_line;  pos(status_line2); erase_line;  pos(status_line1); erase_line;end clr_status;*//***************************************************************************//***************************************************************************/dcl d16_3_timer_errors fixed;dcl test_d16_3_timers lit 'call #test_d16_3_timers';/**************************************************************************/#test_d16_3_timers: proc;  dcl d137 lit '"137"';  dcl (i,j,k) fixed;  pos(status_line1); erase_line;  pstring('Comparing D16 and D03 timers ... ');  pos(status_line2); flush_term;      if (interp_is_running != 0)  	return;  if m64k_exists then write(d137) = shl (5,8);     /* 5 - Set 10uS (normal D16 rate)  */    disable; milliseconds = 0; enable;    write("16") = ^0;    do while read("16") ilt "HFF00"; end;    i = milliseconds;    if (i < 650) or (i > 660) then do;       if d16_3_timer_errors <> "HFFFF" then          d16_3_timer_errors = d16_3_timer_errors + 1;    end;    flush_term;end #test_d16_3_timers;/**************************************************************************//* test_d16_3_timers; */