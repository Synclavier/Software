/* DIR-MISC  $TITLE  Mouse Hole and Other Misc Object Handlers   Modified:   08/06/90 - LSS - bug fix so that MISC group deals with errors properly   02/27/89 - SGS - Created (actually, MISC renamed).   */Open.Misc.Objects: proc swapable;   dcl Id      fixed;   dcl FirstId fixed;   call Set.Auto.Allocation.Id(OBJ$Misc); /* reset id # */   Id=Define.Mouse.Hole.Icon(s#aa,8100,5); /* exit screen icon */   call PID(MouseHole,Id);   FirstId = Id;   /* DebugSwitchId=Define.Switch(s#aa,ScreenTop,71,9,0,'DEBUG:OFF|DEBUG: 1 |DEBUG: 2 |DEBUG: 3 '); */   Id=Group.Objects(GRP$Misc,FirstId,Id,Get#Screen.Event\Get#Program.Exit\Get#Ertyp);   call PID(MiscGrp,Id);      call Activate.Group.Objects(GID(MiscGrp));   call Update.Group.Objects  (GID(MiscGrp));end Open.Misc.Objects;/* $SUBTITLE */Get.Next.Misc.Event: proc swapable;   do while Exit.My.Screen=0;           /* wait for exit condition */      if Screen.Event.Group<>GID(MiscGrp) then return;      if Screen.Event.Code=Get.Screen.Event then do;         if Screen.Event.Id=GID(MouseHole)         then do;            if (Screen.Event.Info=S#MouseSelect)            or (Screen.Event.Info=S#MouseActivate)            then do;               Exit.My.Screen=1;            end;            call Get.Next.Optical.Event;         end;         /* else if Screen.Event.Id=DebugSwitchId  */         /* then call Get.DebugSwitch.Event;       */         else call Get.Next.Optical.Event;      end;      else if Screen.Event.Code=Get.Program.Exit then do;         Exit.My.Screen=1;         call Get.Next.Optical.Event;      end;      else if Screen.Event.Code = Get.Ertyp then do;         if  (GID(SFDErrRow) = 23)   /* use system routine to get both 24 and */         and (GID(SFDErrCol) = 0 )   /* 25 line error codes if possible.      */         then call Handle.System.Error.Codes(Screen.Event.Info);         else if Screen.Event.Info then do;            call Display.Error.Message(Latched.Ertyp,GID(SFDErrRow),GID(SFDErrCol));         end;         call Get.Next.Optical.Event;      end;      else call Get.Next.Optical.Event;   /* get another event */   end;end Get.Next.Misc.Event;eofGet.DebugSwitch.Event: proc swapable;   dcl pdl.used fixed;   do while Exit.My.Screen=0;           /* wait for exit condition */      if Screen.Event.Group<>GID(MiscGrp) then return;      if Screen.Event.Code=Get.Screen.Event then do;         if Screen.Event.Id<>DebugSwitchId then return;         if Screen.Event.Info=S#Deposit then do; /* switch change */            Debug=Fetch.Switch(DebugSwitchId);            if Debug<>0 then do;                call cpos(21,0); call DumpPos;               call Dump.Current.Window.State('Current Window State',activewindowid);            end;         end;         call Get.Next.Optical.Event;      end;      else call Get.Next.Optical.Event;   /* get another event */   end;end Get.DebugSwitch.Event;