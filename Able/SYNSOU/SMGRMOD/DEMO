/* DEMO - $Title  Screen Manager Demo   Modified:   10/07/87 - MWH - Author   */insert ':synlits:comlits';    /* Compilation literals          */insert ':synlits:globlits';   /* Global literals               */insert ':-xpl:strings';       /* String routines (for strcmp)  */insert ':synmods:globdcl';    /* Routines everybody wants      */insert ':synmods:ttydcl';     /* Terminal routines             */insert ':synmods:plotdcl';    /* Plotting routines             */insert ':synmods:mousedcl';   /* Mouse module (for mouse.init) */insert ':synmods:getdcl';     /* Get next event module         */insert ':synmods:smgrdcl';    /* THE SCREEN MANAGER!           */insert ':synmods:syndummy';   /* Dummy Synclavier routines     *//* Declare values for all objects */dcl obj#frame     lit   '100';       /* Frame around the screen */dcl obj#label     lit   '101';       /* A label                 */dcl obj#string    lit   '102';       /* A string                */dcl obj#button    lit   '103';       /* Quit button to get out  */dcl str(85) fixed;                   /* Read string into here   */dcl code    fixed;                   /* Get event code in here  */call clear.term;                     /* Erase the screen        */call initialize.screen.manager(TRD.LEN);  /* Start up Screen Manager *//* Define objects: frame, label, string, button */call define.frame(obj#frame,1,1,22,79,'Demo - Screen Manager Test');call define.label(obj#label,3,3,0,'Enter string:');call set.object.mouse.access(obj#label,0);  /* Don't allow selection */call define.string(obj#string,3,17,25,O#STR.General);call deposit.string(obj#string,'Initial string');call define.label(obj#button,6,15,0,'Quit');call set.object.action(obj#button,O#ACT.Prev.Obj,1);call draw.obj.border(obj#button,O#GSTR.Draw);call activate.screen(obj#string);  /* Turn on all defined objects */call mouse.init;                   /* Initialize the mouse        */do while 1;   call get_enable(get.screen.event);  /* Event we want */   code = get.next.screen.event;       /* Draw objects; wait for event */   call get_disable(get.screen.event); /* No more events for now */   if code = get.screen.event then do; /* From Screen Manager */      if screen.event.info = S#Deposit then do;         if screen.event.id = obj#string    /* New string */         then do;            call fetch.string(obj#string,str);            if strcmp(str,'beep') = 0 then call pc(7);         end;      end;      if screen.event.info = S#MouseSelect then do;         if screen.event.id = obj#button then do;  /* QUIT */            call clear.term;            call set.term.attr(attr#normal);            call tty_wait;            write("54")=0;            print 'Exiting demo...';            call exit(0);         end;      end;                 /* of mouse select */   end;                    /* of get.screen.event */end;                       /* of do while 1 */