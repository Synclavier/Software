/* MOUSE TEST DEMO PROGRAM */insert ':SYNLITS:COMLITS';insert ':SYNLITS:GLOBLITS';insert ':SYNMODS:GLOBDCL';Insert ':SYNMODS:TTYDCL';Insert ':SYNMODS:PLOTDCL';Insert ':SYNMODS:MOUSEDCL';Insert ':SYNMODS:MOUSRDCL';insert ':SYNMODS:GETDCL';Insert ':SYNMODS:SYNDUMMY';plot.icon: proc (x,y);   dcl (x,y) fixed;   dcl frame.icon lit '1';   if frame.icon then do; call pc(27); call ps('\P'); end;   call move_to(x-10,y-10);   call plot   (x+10,y-10);   call plot   (x+10,y+10);   call plot   (x-10,y+10);   call Plot   (x-10,y-10);   if frame.icon then do; call pc(27); call ps('\p'); end;end plot.icon;dcl (i,x,y,time) fixed;dcl (old.x,old.y) fixed;dcl quit          fixed;dcl ch            fixed;dcl event         fixed;call clear.term;call Mouse.init;call Termulator.Relative.Mouse.Report.Format;call ps('Mouse.Ready: '); call pnum(mouse.ready,0); call pcr;call pcr;call psr('Entering main loop of MOUSTEST');call psr('Press any character to quit program.');call pcr;call psr('Press any character to start....');call get.next.d50.in.char;call Hide.Termulator.Cursor;call Get_Enable(get.mouse.button);call Get_Enable(get.mouse.movement);call Get_Enable(get.in.char);vector_mode;   call data_level(#dots.comp);   call Set.Fill.Pattern("137");   call pc(27);             /* Select the pattern */   call ps('|P');   call ps('_');transparent_mode;quit = 0;do while (quit = 0);           /* no chars typed */   event = Get.Next.Event;   if (event = get.mouse.button) then do;      i=Mouse(Button.Result);      call pnum(i,0); call ps(' ');      if i<0 then do;         call ps('Press -> ');         call pnum(Mouse(Press.x      ),0);call ps(' ');         call pnum(Mouse(Press.y      ),0);call ps(' ');         call pnum(Mouse(Press.time   ),0);call ps(' ');      end;      else do;         call ps('Release -> ');         call pnum(Mouse(Release.x    ),0);call ps(' ');         call pnum(Mouse(Release.y    ),0);call ps(' ');         call pnum(Mouse(Release.time ),0);      end;      call pcr;   end;   else if (event = get.mouse.movement) then do;      old.x=x; old.y=y;      disable;         x=mouse.x; y=mouse.y;      enable;      if 0 then do;         call ps('Time: '); call pnum(Real.Milliseconds-time,0);         call ps('  (X,Y): '); call pnum(x,0); call pc(32); call pnum(y,0);          call pcr;      end;      else do;         vector_mode;            call plot.icon (old.x,old.y); /* undraw old box */            call plot.icon (x,y);         /* draw new box */         transparent_mode;      end;   end;   else if event = get.in.char then do;      quit = 1;      ch = next.event.info;   end;end;call Show.Termulator.Cursor;call Disable.Termulator.Auto.Mouse.Report;call pcr;call ps('Exit character: "');call pnum(ch,0); call ps('"');call pcr;call tty_wait;