/* To capture the pass1 to pass2 intermediate file, insert this file  just before the procedure PASS1 in P1-0 returns.  This will cause  the compiler to terminate with the intermediate file as your current  file (if no errors were encountered).  It is necessary to COMpile  the source file to make this happen. */if ((trmst = 0) and (core(loc.rst) = 1)) then begin; /* if clean status and COMpiling */   dcl i fixed;   dcl cnam (4) fixed; /* holds name for change */   do i = 0 to 4; cnam (i) = core(loc.cfn + i); end; /* get current file name */   i = cnam (0); /* get number of letters */   if i > 7 then i = 7; /* add one letter */   call pbyte(cnam, i, "56"); /* add dot at end to mean compiled */   cnam (0) = i + 1; /* and add one letter */   do i = 0 to 4; /* restore filename */      core(loc.cfn + i) = cnam (i);   end;   core(loc.cmed) = 0; /* indicate disk file */   core(loc.csec + 1) = ifdev; /* device */   core(loc.csec) = ifstart + ifofs; /* starting sector */   core(loc.csln) = iflng; /* length in sectors */   core(loc.clen) = shl(iflng, 8); /* length in words */   core(loc.ftyp) = 3; /* indicate a data file */   core(loc.strd) = 1; /* indicate stored (in .work) */   core(loc.svd) = 0; /* but NOT saved */   core(loc.rst)  = 2; /* indicates successful compilation */   print 'Current file is now called "', string(cnam), '"';    call overlay (core(loc.mon + 1), core(loc.mon), core(loc.mon - 1));end;