// Routine is used from within Talksouf to send data bytes// to synclavier(or Mac) via SCSI.//// SCSI mode is data in (e.g. data into host computer from LOD).//// Code appears to do correct req/ack handshaking (1/20/99 - CJ)saveR0 = read("300");                    /* save r0 */write("300" ) = read("313");             /* transfer send word to r0 */write(and0  ) = "177400";                /* mask off lower byte */write(bsor0 ) = 0;                       /* swap high byte low */write("24"  ) = read("300");             /* write it out */write("25"  ) = (S$DataIn \ S$Req);      /* assert req */write("300" ) = read("25");              /* check for ack */write(tand0 ) = S$Ack;                   /* ack bit */write(rtze  ) = -3;                      /* loop back if zero */write("300" ) = read("313");             /* load scsi word again */write(and0  ) = "377";                   /* mask of upper byte */write("24"  ) = read("300");             /* write it out */write("25"  ) = S$DataIn;                /* negate req */write("300" ) = read("25");              /* check for ack to go false */write(tand0 ) = S$Ack;                   /* and it with ack bit */write(rtnz  ) = -3;                      /* ack still true - loop back */write("25"  ) = (S$DataIn \ S$Req);      /* assert req for 2nd byte */write("300" ) = read("25");              /* check for ack */write(tand0 ) = S$Ack;                   /* ack bit */write(rtze  ) = -3;                      /* loop back if zero */write("25"  ) = S$DataIn;                /* negate req */write("300" ) = read("25");              /* check for ack to go false */write(tand0 ) = S$Ack;                   /* and it with ack bit */write(rtnz  ) = -3;                      /* ack still true - loop back */write("300" ) = saveR0;                  /* restore r0 */